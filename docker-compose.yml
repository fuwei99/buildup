services:
  buildup:
    image: ghcr.io/fuwei99/buildup:fangnimadepi
    container_name: buildup-proxy
    restart: unless-stopped

    # 端口映射 (保持默认或读取环境变量)
    ports:
      - "${PORT:-8051}:7860"

    # 环境变量
    # 建议：仅保留需要修改的变量，默认值通常已在镜像内定义好
    environment:
      - NODE_ENV=production
      - HOST=0.0.0.0
      - PORT=7860
      - API_KEYS=${API_KEYS:-123456}
      # 如果你想覆盖默认设置，取消下面注释并修改即可
      # - STREAMING_MODE=real
      # - DEBUG_MODE=false

      # 数据卷
    volumes:
      - ./data:/home/user/data
      # 如果需要配置文件，取消下面注释
      - ./auth:/home/user/auth:ro
      # - ./config.json:/home/user/config.json:ro

      # 日志 (可选，保持默认即可，为了防止日志爆满保留限制配置)
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
